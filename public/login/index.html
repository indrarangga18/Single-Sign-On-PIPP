<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Login — SSO PIPP</title>
    <link rel="icon" href="/images/logo-kkp-pipp.png" />
    <style>
      :root {
        --primary: #04255c;
        --white: #ffffff;
        --text: #0f172a;
        --muted: #64748b;
        --border: #e2e8f0;
        --accent: #0ea5e9;
        --success: #10b981;
        --danger: #ef4444;
      }

      * { box-sizing: border-box; }
      html, body { height: 100%; }
      body {
        margin: 0;
        font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
        color: var(--text);
        background: linear-gradient(135deg, #0b1020 0%, #0e1e3c 38%, #061a3a 100%);
        min-height: 100vh;
        display: grid;
        grid-template-columns: 1.25fr 1fr;
        align-items: stretch;
      }

      /* Animated neon background orbs */
      .fx{ position:fixed; inset:0; pointer-events:none; z-index:0; }
      .orb{ position:absolute; width:360px; height:360px; border-radius:50%; filter: blur(80px); opacity:.35; }
      .orb.o1{ background: radial-gradient(closest-side, rgba(53,225,255,.9), transparent 70%); top:10%; left:6%; animation: float 12s ease-in-out infinite; }
      .orb.o2{ background: radial-gradient(closest-side, rgba(167,139,250,.9), transparent 70%); bottom:12%; right:10%; animation: float 16s ease-in-out infinite reverse; }
      .orb.o3{ background: radial-gradient(closest-side, rgba(96,165,250,.9), transparent 70%); top:55%; left:60%; animation: float 20s ease-in-out infinite; }
      @keyframes float { 0%,100%{ transform:translate(0,0);} 50%{ transform: translate(14px,-10px);} }

      /* Split layout: left welcome content, right login card */
      .split { width: 100%; height: 100%; display: contents; }
      .panel-left {
        position: relative; overflow: hidden; z-index: 0;
        display: flex; align-items: center; justify-content: center;
        padding: 40px; isolation: isolate;
      }
      .panel-right { position: relative; display: grid; place-items: center; padding: 24px; }

      /* Welcome content styles (futuristic, clean, no neon glow) */
      .welcome { position: relative; width: 100%; max-width: 980px; padding: 8px 12px; animation: reveal .6s ease both; }
      @keyframes reveal { from { opacity:0; transform: translateY(8px);} to { opacity:1; transform: translateY(0);} }
      .kicker { display:inline-block; font-size: 12px; letter-spacing: .22em; text-transform: uppercase; color: #93c5fd; background: linear-gradient(90deg, rgba(14,165,233,.35), rgba(99,102,241,.35)); padding: 8px 12px; border-radius: 999px; }
      .welcome-title { margin: 16px 0 10px; font-weight: 900; line-height: 1.12; font-size: clamp(24px, 4vw, 46px); padding-bottom: 2px;
        background: conic-gradient(from 230deg at 50% 50%, #eef2ff, #93c5fd 25%, #a78bfa 50%, #60a5fa 75%, #eef2ff);
        background-size: 200% 200%; -webkit-background-clip: text; background-clip: text; color: transparent; animation: aurora 6s ease-in-out infinite; }
      @keyframes aurora { 0%{ background-position: 0% 50%; } 50%{ background-position: 100% 50%; } 100%{ background-position: 0% 50%; } }
      .welcome-line { margin: 8px 0; font-size: clamp(14px, 1.6vw, 18px); color: #e2e8f0; }
      .welcome-line.org { font-weight: 700; color: #cbd5e1; }
      .accent { width: 180px; height: 2px; background: linear-gradient(90deg, #0ea5e9, #6366f1); border-radius: 2px; margin: 18px 0 10px; }
      .welcome-mission { margin: 8px 0 0; font-size: clamp(14px, 1.5vw, 18px); color: #dbeafe; opacity: .95; font-style: italic; }

      /* Subtle decorative background behind welcome */
      .panel-left::after{ content:""; position:absolute; inset:0; background-image: radial-gradient(circle at 15% 20%, rgba(53,225,255,.12), transparent 32%), radial-gradient(circle at 85% 85%, rgba(167,139,250,.1), transparent 36%); z-index:-1; }

      .card {
        position: relative;
        background: transparent;
        backdrop-filter: none;
        border-radius: 0;
        border: none;
        box-shadow: none;
        overflow: visible;
        animation: floatIn .5s ease both;
        z-index: 1;
        width: 100%; max-width: 520px;
      }
      @keyframes floatIn { from { opacity: 0; transform: translateY(8px); } to { opacity: 1; transform: translateY(0); } }

      .card-header { padding: 12px 0 10px; text-align: left; display: grid; grid-template-columns: auto 1fr; gap: 18px; align-items: center; }
      .logo { position: relative; display: inline-grid; place-items: center; padding: 0; border-radius: 12px; background: transparent; }
      .logo img { width: clamp(160px, 22vw, 280px); height: auto; object-fit: contain; border-radius: 12px; filter: none; }

      .title { margin: 4px 0 2px; font-weight: 800; font-size: 24px; letter-spacing: .2px; background: linear-gradient(90deg, #7dd3fc, #a78bfa 45%, #60a5fa); -webkit-background-clip: text; background-clip: text; color: transparent; text-shadow: 0 1px 14px rgba(53,225,255,.18); }
      .subtitle { margin: 0; font-size: 13px; color: #cbd5e1; }

      .card-body { padding: 0; }

      .form-group { margin-bottom: 14px; }
      label { display: block; font-size: 12px; color: var(--muted); margin-bottom: 6px; }

      .input-wrap { position: relative; }
      .input-icon { position: absolute; left: 12px; top: 50%; transform: translateY(-50%); width: 18px; height: 18px; color: #94a3b8; }
      .input {
        width: 100%; height: 44px; border: 1px solid rgba(226,232,240,.25); border-radius: 12px;
        padding: 0 12px 0 36px; outline: none; transition: box-shadow .2s, border-color .2s, background-color .2s;
        background: rgba(255,255,255,.08); color: #e2e8f0;
      }
      .input::placeholder{ color:#94a3b8; }
      .input:focus { border-color: var(--accent); box-shadow: 0 0 0 3px rgba(14, 165, 233, 0.22); background: rgba(255,255,255,.12); }
      .toggle-pass { position: absolute; right: 10px; top: 50%; transform: translateY(-50%); border: none; background: transparent; cursor: pointer; color: #e2e8f0; padding: 6px; border-radius: 8px; }
      .toggle-pass:hover { background: rgba(255,255,255,.08); }

      .error { display:none; margin-top:6px; font-size:12px; color: var(--danger); }

      /* (Captcha dihapus) */

      .actions { display: flex; align-items: center; justify-content: space-between; margin-top: 6px; }
      .link { font-size: 12px; color: var(--accent); text-decoration: none; }
      .link:hover { text-decoration: underline; }

      .btn {
        width: 100%; margin-top: 16px; height: 44px; border: none; border-radius: 12px;
        background: linear-gradient(90deg, #0ea5e9, #6366f1);
        color: #fff; font-weight: 700; letter-spacing: .2px; cursor: pointer;
        transition: transform .06s ease, box-shadow .2s ease, filter .18s;
        display: inline-grid; place-items: center; position: relative;
        box-shadow: 0 0 0 1px rgba(53,225,255,.35), 0 16px 30px rgba(53,225,255,.22);
      }
      .btn:hover { box-shadow: 0 0 0 1px rgba(53,225,255,.55), 0 20px 40px rgba(99,102,241,.28); filter: brightness(1.04); }
      .btn:active { transform: translateY(1px); }
      .btn[disabled] { opacity: .7; cursor: not-allowed; }

      .spinner { display:none; width:18px; height:18px; border: 2px solid rgba(255,255,255,.5); border-top-color: #fff; border-radius: 50%; animation: spin .8s linear infinite; position:absolute; right: 14px; }
      @keyframes spin { to { transform: rotate(360deg); } }

      .footer { padding: 14px; text-align: center; font-size: 12px; color: var(--muted); }

      /* Modal (popup) untuk sukses/gagal login */
      .modal { position: fixed; inset: 0; display: none; place-items: center; z-index: 100; background: rgba(2,10,24,.55); backdrop-filter: blur(2px); }
      .modal-box { width: min(520px, 92vw); border-radius: 16px; padding: 20px 18px; background: rgba(14,23,41,.92); box-shadow: 0 16px 40px rgba(0,0,0,.35); border: 1px solid rgba(226,232,240,.18); }
      .modal-title { margin: 0 0 8px; font-weight: 800; font-size: 20px; color: #e2e8f0; }
      .modal-text { margin: 0 0 16px; font-size: 14px; color: #cbd5e1; }
      .modal-actions { display: flex; justify-content: flex-end; gap: 10px; }
      .modal-btn { border: none; border-radius: 10px; padding: 10px 14px; font-weight: 700; cursor: pointer; }
      .modal-success .modal-btn { background: linear-gradient(90deg, #10b981, #22c55e); color: #fff; }
      .modal-error .modal-btn { background: linear-gradient(90deg, #ef4444, #f43f5e); color: #fff; }

      /* Responsive */
      @media (max-width: 980px){
        body{ grid-template-columns: 1fr; }
        .panel-left{ padding: 22px; }
        .welcome{ max-width: 740px; }
      }
      @media (max-width: 640px){
        .welcome-title{ font-size: clamp(22px, 5.6vw, 34px); line-height: 1.14; }
      }
    </style>
    <style>
      /* Override: samakan dengan halaman root (aktifkan orbs, nonaktifkan dekorasi tambahan) */
      .bg-grid { display: none !important; }
      /* Orbs persis seperti root */
      .fx { position: fixed; inset: 0; pointer-events: none; z-index: 0; }
      .orb { position: absolute; width: 380px; height: 380px; border-radius: 50%; filter: blur(86px); opacity: .35; }
      .orb.o1 { background: radial-gradient(closest-side, rgba(53,225,255,.9), transparent 72%); top: 10%; left: 8%; animation: float 14s ease-in-out infinite; }
      .orb.o2 { background: radial-gradient(closest-side, rgba(167,139,250,.9), transparent 72%); bottom: 12%; right: 10%; animation: float 18s ease-in-out infinite reverse; }
      .orb.o3 { background: radial-gradient(closest-side, rgba(96,165,250,.9), transparent 72%); top: 58%; left: 58%; animation: float 22s ease-in-out infinite; }
      @keyframes float { 0%,100% { transform: translate(0,0) } 50% { transform: translate(16px,-12px) } }
    </style>
  </head>
  <body>
    <div class="fx" aria-hidden="true"><span class="orb o1"></span><span class="orb o2"></span><span class="orb o3"></span></div>
    <main class="split">
      <section class="panel-left" aria-label="Sambutan PIPP">
        <div class="welcome" role="region" aria-label="Welcome PIPP">
          <span class="kicker">Welcome</span>
          <h2 class="welcome-title">Selamat Datang di Portal Program PIPP</h2>
          <p class="welcome-line">Pemberdayaan Usaha Nelayan Kecil, Pembudidaya Ikan Kecil, dan Petambak Garam Kecil</p>
          <p class="welcome-line org">Kementerian Kelautan dan Perikanan Republik Indonesia</p>
          <div class="accent"></div>
          <p class="welcome-mission">Bersama kita wujudkan kesejahteraan masyarakat pesisir melalui pemberdayaan ekonomi berkelanjutan.</p>
        </div>
      </section>

      <section class="panel-right" aria-label="Area Login">
        <div class="card" role="region" aria-label="Form Login SSO PIPP">
          <div class="card-header">
            <span class="logo"><img src="/images/logo-kkp-pipp.png" alt="Logo PIPP" /></span>
            <h1 class="title">Single Sign-On</h1>
            <p class="subtitle">Silakan masuk untuk melanjutkan akses Anda</p>
          </div>
          <div class="card-body">
            <form id="login-form" method="post" action="#" autocomplete="on" novalidate>
              <div class="form-group">
                <label for="username">Email atau Username</label>
                <div class="input-wrap">
                  <svg class="input-icon" viewBox="0 0 24 24"><path fill="currentColor" d="M12 12a5 5 0 1 0 0-10a5 5 0 0 0 0 10Zm-7 9a7 7 0 1 1 14 0v1H5v-1Z"/></svg>
                  <input class="input" id="username" name="username" type="text" placeholder="nama@contoh.id" required />
                </div>
                <p class="error" id="err-username">Masukkan email/username yang valid.</p>
              </div>
              <div class="form-group">
                <label for="password">Kata Sandi</label>
                <div class="input-wrap">
                  <svg class="input-icon" viewBox="0 0 24 24"><path fill="currentColor" d="M17 8V7a5 5 0 0 0-10 0v1H5v12h14V8h-2Zm-8-1a3 3 0 0 1 6 0v1H9V7Zm10 3v8H5v-8h14Z"/></svg>
                  <input class="input" id="password" name="password" type="password" placeholder="••••••••" minlength="6" required />
                  <button type="button" class="toggle-pass" aria-label="Tampilkan kata sandi" id="toggle-pass">
                    <svg width="18" height="18" viewBox="0 0 24 24"><path fill="currentColor" d="M12 5c-7 0-10 7-10 7s3 7 10 7s10-7 10-7s-3-7-10-7Zm0 12a5 5 0 1 1 0-10a5 5 0 0 1 0 10Z"/></svg>
                  </button>
                </div>
                <p class="error" id="err-password">Kata sandi minimal 6 karakter.</p>
              </div>
              <div class="actions">
                <label style="font-size:12px; color: var(--muted); display:flex; align-items:center; gap:8px;">
                  <input type="checkbox" id="remember" name="remember" /> Ingat saya
                </label>
                <a class="link" href="#" onclick="alert('Hubungi admin untuk reset kata sandi.'); return false;">Lupa kata sandi?</a>
              </div>
              
              <button class="btn" id="login-btn" type="submit">
                Masuk
                <span class="spinner" id="spinner"></span>
              </button>
            </form>
          </div>
          <div class="footer">© 2025 KKP • SSO PIPP</div>
        </div>
      </section>
    </main>

    <!-- Popups untuk hasil login -->
    <div id="modal-success" class="modal modal-success" aria-hidden="true" role="dialog" aria-labelledby="success-title">
      <div class="modal-box" role="document">
        <h3 id="success-title" class="modal-title">Login Berhasil</h3>
        <p id="msg-success" class="modal-text">Anda berhasil masuk.</p>
        <div class="modal-actions">
          <button id="close-success" class="modal-btn" type="button">OK</button>
        </div>
      </div>
    </div>

    <div id="modal-error" class="modal modal-error" aria-hidden="true" role="alertdialog" aria-labelledby="error-title">
      <div class="modal-box" role="document">
        <h3 id="error-title" class="modal-title">Gagal Login</h3>
        <p id="msg-error" class="modal-text">Cek kembali username atau password Anda.</p>
        <div class="modal-actions">
          <button id="close-error" class="modal-btn" type="button">Tutup</button>
        </div>
      </div>
    </div>

    <script>
      const form = document.getElementById('login-form');
      const username = document.getElementById('username');
      const password = document.getElementById('password');
      const errU = document.getElementById('err-username');
      const errP = document.getElementById('err-password');
      const btn = document.getElementById('login-btn');
      const spinner = document.getElementById('spinner');
      // Modal elements
      const modalSuccess = document.getElementById('modal-success');
      const modalError = document.getElementById('modal-error');
      const msgSuccess = document.getElementById('msg-success');
      const msgError = document.getElementById('msg-error');
      const closeSuccess = document.getElementById('close-success');
      const closeError = document.getElementById('close-error');
      // (Captcha dihapus)

      // Toggle visibilitas password
      document.getElementById('toggle-pass').addEventListener('click', function(){
        const isText = password.type === 'text';
        password.type = isText ? 'password' : 'text';
        this.setAttribute('aria-label', isText ? 'Tampilkan kata sandi' : 'Sembunyikan kata sandi');
      });

      function openModal(el){ el.style.display = 'grid'; el.setAttribute('aria-hidden','false'); }
      function closeModal(el){ el.style.display = 'none'; el.setAttribute('aria-hidden','true'); }
      function showSuccess(msg){ if (msg) msgSuccess.textContent = msg; openModal(modalSuccess); }
      function showError(msg){ if (msg) msgError.textContent = msg; openModal(modalError); }

      closeSuccess.addEventListener('click', () => closeModal(modalSuccess));
      closeError.addEventListener('click', () => closeModal(modalError));

      function validate(){
        let ok = true;
        // Username/email minimal 3 karakter
        if (username.value.trim().length < 3){ errU.style.display = 'block'; ok = false; }
        else { errU.style.display = 'none'; }
        // Password minimal 6 karakter
        if (password.value.trim().length < 6){ errP.style.display = 'block'; ok = false; }
        else { errP.style.display = 'none'; }
        // Tombol tetap aktif; verifikasi dilakukan saat submit
        btn.disabled = false;
        return ok;
      }

      username.addEventListener('input', validate);
      password.addEventListener('input', validate);

      form.addEventListener('submit', function(e){
        e.preventDefault();
        if(!validate()) {
          showError('Gagal login: cek kembali username atau password Anda.');
          return;
        }

        // Simulasi proses login yang halus
        btn.setAttribute('disabled','disabled');
        spinner.style.display = 'inline-block';
        showSuccess('Login berhasil. Mengarahkan ke dashboard...');
        setTimeout(() => {
          closeModal(modalSuccess);
          // Redirect ke dashboard (sesuai permintaan)
          window.location.href = '/dashboard';
        }, 900);
      });
    </script>
  </body>
  </html>