<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Informasi Pelabuhan ‚Äî SSO PIPP</title>
    <link rel="icon" href="/images/logo-KKP.png" />
    <style>
      :root { --primary:#04255c; --white:#ffffff; --text:#0f172a; --muted:#64748b; --border:#e2e8f0; --accent:#35e1ff; }
      *{box-sizing:border-box}
      html,body{height:100%}
      body{margin:0;font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;color:var(--text);
           background:
             radial-gradient(800px 420px at 14% 12%, rgba(53,225,255,.22) 0%, rgba(53,225,255,0) 55%),
             linear-gradient(135deg, #061a3a 0%, #0b1020 55%, #0e1e3c 100%);
          }
      .wrap{max-width:1200px;margin:0 auto;padding:28px}
      header{display:flex;align-items:center;gap:14px;margin-bottom:18px}
      .logo{width:48px;height:48px;border-radius:50%;background:#fff;display:grid;place-items:center;box-shadow:inset 0 0 0 2px #eef2f7}
      .logo img{width:42px;height:42px;object-fit:contain}
      .title{font-size:22px;font-weight:800;color:#e2f4ff;margin:0;text-shadow:0 1px 8px rgba(53,225,255,.35)}
      .subtitle{margin:2px 0 0;color:#cbd5e1;font-size:13px}

      .toolbar{display:flex;align-items:center;gap:10px;margin:16px 0}
      .btn{background:#0f172a;color:#e5e7eb;border:1px solid rgba(226,232,240,.14);border-radius:10px;padding:10px 12px;text-decoration:none;display:inline-flex;align-items:center;gap:8px}
      .btn:hover{background:#111827}
      .search{flex:1;display:flex;gap:8px}
      .search input{flex:1;padding:10px 12px;border:1px solid var(--border);border-radius:10px}

      .layout{display:grid;grid-template-columns:1.3fr .7fr;gap:18px}
      @media (max-width:920px){.layout{grid-template-columns:1fr}}

      .panel{position:relative;border:1px solid var(--border);border-radius:16px;background:rgba(255,255,255,.94);
             backdrop-filter:saturate(1.1) blur(8px);padding:16px;box-shadow:0 10px 24px rgba(4,37,92,.18)}
      .panel h2{margin:0 0 8px;font-size:18px;font-weight:800;color:#0b3b9b}
      .panel p{margin:0 0 8px;color:var(--muted);font-size:13px}

      /* Data Pelabuhan table */
      table{width:100%;border-collapse:collapse}
      th,td{padding:10px;border-bottom:1px solid var(--border);text-align:left;font-size:13px}
      thead th{background:#f8fafc;color:#0f172a;font-weight:700}
      tbody tr{cursor:pointer}
      tbody tr:hover{background:#f1f5f9}

      /* Fasilitas & Kegiatan grid */
      .grid{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:12px}
      @media (max-width:920px){.grid{grid-template-columns:repeat(2,1fr)}}
      @media (max-width:560px){.grid{grid-template-columns:1fr}}
      .card{border:1px solid var(--border);border-radius:14px;padding:14px;display:flex;gap:10px;align-items:center;background:#fff}
      .card .icon{width:40px;height:40px;border-radius:10px;display:grid;place-items:center;background:#eef2f7;color:#0b3b9b}
      .card h3{margin:0;font-size:15px;font-weight:800}
      .card p{margin:2px 0 0;color:var(--muted);font-size:12px}

      /* Detail lengkap */
      .details{display:grid;grid-template-columns:1fr;gap:10px}
      .kv{display:grid;grid-template-columns:140px 1fr;gap:8px}
      .kv strong{color:#0b3b9b}
      .chart{height:160px;border:1px solid var(--border);border-radius:12px;overflow:hidden;background:#fff}
      .chart canvas{width:100%;height:100%}
    </style>
  </head>
  <body>
    <div class="wrap">
      <header>
        <a class="logo" href="/dashboard/"><img src="/images/logo-KKP.png" alt="Logo KKP"/></a>
        <div>
          <h1 class="title">Informasi Pelabuhan</h1>
          <p class="subtitle">Data pelabuhan perikanan, fasilitas, kegiatan, dan statistik</p>
        </div>
      </header>

      <div class="toolbar">
        <a class="btn" href="/dashboard/">‚¨ÖÔ∏è Kembali ke Dashboard</a>
        <div class="search">
          <input id="q" placeholder="Cari pelabuhan (nama/lokasi)..." />
          <a class="btn" id="reset">Reset</a>
        </div>
      </div>

      <div class="layout">
        <section class="panel" aria-label="Data Pelabuhan Perikanan">
          <h2>Data Pelabuhan Perikanan</h2>
          <p>Daftar ringkas pelabuhan perikanan beserta kelas, tipe, dan lokasi.</p>
          <table id="portTable">
            <thead>
              <tr>
                <th>Nama Pelabuhan</th>
                <th>Kelas</th>
                <th>Tipe</th>
                <th>Lokasi</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </section>

        <aside class="panel" aria-label="Fasilitas dan Kegiatan">
          <h2>Fasilitas dan Kegiatan</h2>
          <p>Gambaran fasilitas utama dan kegiatan operasional di pelabuhan.</p>
          <div class="grid" id="facilityGrid"></div>
          <div class="grid" id="activityGrid" style="margin-top:10px"></div>
        </aside>
      </div>

      <section class="panel" style="margin-top:18px" aria-label="Informasi Lengkap">
        <h2>Informasi Lengkap</h2>
        <p>Detail pelabuhan terpilih (kelas, tipe, lokasi, aktivitas, statistik bongkar muat).</p>
        <div class="details">
          <div class="kv"><strong>Nama</strong><span id="d-nama">-</span></div>
          <div class="kv"><strong>Kelas</strong><span id="d-kelas">-</span></div>
          <div class="kv"><strong>Tipe</strong><span id="d-tipe">-</span></div>
          <div class="kv"><strong>Lokasi</strong><span id="d-lokasi">-</span></div>
          <div class="kv"><strong>Aktivitas</strong><span id="d-aktivitas">-</span></div>
        </div>
        <div class="chart" aria-label="Statistik Bongkar Muat">
          <canvas id="chart"></canvas>
        </div>
      </section>
    </div>

    <script>
      // Data contoh (placeholder). Ganti dengan data API bila tersedia.
      const PORTS = [
        { id:1, nama:'PPN Nusantara', kelas:'PPN', tipe:'Perikanan', lokasi:'Kota A', aktivitas:['Bongkar Muat','Pelelangan','Logistik'], statistik:[120,90,140,160,130,180,175,190,150,170,165,200] },
        { id:2, nama:'PSN Bahari', kelas:'PSN', tipe:'Perikanan', lokasi:'Kabupaten B', aktivitas:['Bongkar Muat','Pengolahan'], statistik:[80,100,95,110,105,120,115,130,145,140,135,150] },
        { id:3, nama:'PPP Samudera', kelas:'PPP', tipe:'Perikanan', lokasi:'Kota C', aktivitas:['Bongkar Muat','Pelelangan','Pengolahan'], statistik:[60,70,85,90,95,110,100,120,110,115,125,130] },
      ];
      const FACILITIES = [
        { icon:'‚öì', nama:'Dermaga', desc:'Dermaga sandar kapal perikanan.' },
        { icon:'üè¨', nama:'TPI', desc:'Tempat Pelelangan Ikan terorganisir.' },
        { icon:'‚ùÑÔ∏è', nama:'Cold Storage', desc:'Penyimpanan berpendingin untuk ikan.' },
        { icon:'üõ¢Ô∏è', nama:'Bunker BBM', desc:'Pasokan bahan bakar kapal.' },
        { icon:'üß∞', nama:'Workshop', desc:'Perawatan dan perbaikan kapal.' },
        { icon:'üß™', nama:'Lab Mutu', desc:'Pengujian mutu hasil tangkapan.' },
      ];
      const ACTIVITIES = [
        { icon:'üì¶', nama:'Bongkar Muat', desc:'Distribusi dan penanganan komoditas.' },
        { icon:'üéôÔ∏è', nama:'Pelelangan', desc:'Transaksi di TPI secara terbuka.' },
        { icon:'üè≠', nama:'Pengolahan', desc:'Processing hasil perikanan.' },
        { icon:'üöö', nama:'Logistik', desc:'Rantai pasok dan transportasi.' },
      ];

      // Render table data
      const tbody = document.querySelector('#portTable tbody');
      const q = document.getElementById('q');
      const reset = document.getElementById('reset');

      function renderTable(rows){
        tbody.innerHTML = '';
        rows.forEach(row => {
          const tr = document.createElement('tr');
          tr.innerHTML = `<td>${row.nama}</td><td>${row.kelas}</td><td>${row.tipe}</td><td>${row.lokasi}</td>`;
          tr.addEventListener('click', () => selectPort(row));
          tbody.appendChild(tr);
        });
      }
      function filter(){
        const s = (q.value||'').toLowerCase();
        const rows = PORTS.filter(p => `${p.nama} ${p.kelas} ${p.tipe} ${p.lokasi}`.toLowerCase().includes(s));
        renderTable(rows);
      }
      q.addEventListener('input', filter);
      reset.addEventListener('click', () => { q.value=''; filter(); });

      // Facilities & Activities
      const facilityGrid = document.getElementById('facilityGrid');
      const activityGrid = document.getElementById('activityGrid');
      function renderGrid(container, items){
        container.innerHTML = '';
        items.forEach(i => {
          const card = document.createElement('div');
          card.className = 'card';
          card.innerHTML = `<span class="icon">${i.icon}</span><div><h3>${i.nama}</h3><p>${i.desc}</p></div>`;
          container.appendChild(card);
        });
      }

      // Details & chart
      const dn = document.getElementById('d-nama');
      const dk = document.getElementById('d-kelas');
      const dt = document.getElementById('d-tipe');
      const dl = document.getElementById('d-lokasi');
      const da = document.getElementById('d-aktivitas');
      const chartEl = document.getElementById('chart');
      const ctx = chartEl.getContext('2d');

      function drawChart(values){
        const w = chartEl.width = chartEl.clientWidth;
        const h = chartEl.height = chartEl.clientHeight;
        ctx.clearRect(0,0,w,h);
        // axes
        ctx.strokeStyle = '#cbd5e1'; ctx.lineWidth = 1;
        ctx.beginPath(); ctx.moveTo(40,10); ctx.lineTo(40,h-30); ctx.lineTo(w-10,h-30); ctx.stroke();
        // scale
        const max = Math.max(...values) * 1.15;
        const stepX = (w-60)/values.length;
        ctx.fillStyle = '#0b3b9b';
        values.forEach((v, i) => {
          const x = 40 + i*stepX + 4;
          const barH = (h-50) * (v/max);
          const y = (h-30) - barH;
          ctx.fillRect(x, y, Math.max(12, stepX-12), barH);
        });
        // title
        ctx.fillStyle = '#0f172a';
        ctx.font = '12px system-ui';
        ctx.fillText('Statistik Bongkar Muat (bulan)', 50, 20);
      }

      function selectPort(p){
        dn.textContent = p.nama;
        dk.textContent = p.kelas;
        dt.textContent = p.tipe;
        dl.textContent = p.lokasi;
        da.textContent = p.aktivitas.join(', ');
        drawChart(p.statistik);
      }

      // init
      renderTable(PORTS);
      renderGrid(facilityGrid, FACILITIES);
      renderGrid(activityGrid, ACTIVITIES);
      selectPort(PORTS[0]);
    </script>
  </body>
  </html>